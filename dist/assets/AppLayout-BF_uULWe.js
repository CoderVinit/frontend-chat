function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/Search-D1He7V8E.js","assets/index-BRYrtOYy.js","assets/index-DdwGzNOV.js","assets/Delete-BT8gj__Z.js","assets/Modal-CADgA5Of.js","assets/UserItems-m5sG-z-p.js","assets/Features-VHPfM-O5.js","assets/ListItem-B4dopy2O.js","assets/Menu-Cy-i2GGQ.js","assets/isMuiElement-DvTSXCug.js","assets/DialogTitle-on2HWKW6.js","assets/TextField-CUotFnna.js","assets/InputAdornment-KVEnJoAv.js","assets/AvatarCard-CUbOGxQa.js","assets/Toolbar-ITnAtlz5.js","assets/Group-BQiUClK4.js","assets/Tooltip-BgeYST1d.js","assets/ExitToApp-U3kPwFHq.js","assets/Notifications-GdzM-Ank.js","assets/Button-CgSTDiwQ.js","assets/NewGroup-BF1Jc6wU.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{p as J,q as K,t as X,v as y,w as v,r as p,x as Z,y as oo,j as o,z as so,A as to,H as eo,c as C,S as k,L as ro,B as L,C as D,h as R,u as P,o as ao,D as O,E as no,F as co,a as io,G as lo,_ as z,J as po,K as xo,M as F,N as ho,f as uo,O as go,P as mo,n as S,Q as M,R as jo}from"./index-BRYrtOYy.js";import{A as Co,D as fo,a as vo,u as ko}from"./Delete-BT8gj__Z.js";import{t as bo,h as Ao,B as E,M as Io,g as Eo,D as Mo}from"./Features-VHPfM-O5.js";import{A as Bo,M as To}from"./Menu-Cy-i2GGQ.js";import{P as yo,c as b,T as f,M as V,B as N}from"./Modal-CADgA5Of.js";import{A as _o}from"./AvatarCard-CUbOGxQa.js";import{T as No,B as Do}from"./Toolbar-ITnAtlz5.js";import{G as zo}from"./Group-BQiUClK4.js";import{M as So}from"./Tooltip-BgeYST1d.js";import{E as Go}from"./ExitToApp-U3kPwFHq.js";function Ho(s){return J("MuiAppBar",s)}K("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);const Lo=["className","color","enableColorOnDark","position"],Ro=s=>{const{color:t,position:e,classes:r}=s,a={root:["root",`color${y(t)}`,`position${y(e)}`]};return to(a,Ho,r)},B=(s,t)=>s?`${s==null?void 0:s.replace(")","")}, ${t})`:t,Po=X(yo,{name:"MuiAppBar",slot:"Root",overridesResolver:(s,t)=>{const{ownerState:e}=s;return[t.root,t[`position${y(e.position)}`],t[`color${y(e.color)}`]]}})(({theme:s,ownerState:t})=>{const e=s.palette.mode==="light"?s.palette.grey[100]:s.palette.grey[900];return v({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0},t.position==="fixed"&&{position:"fixed",zIndex:(s.vars||s).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}},t.position==="absolute"&&{position:"absolute",zIndex:(s.vars||s).zIndex.appBar,top:0,left:"auto",right:0},t.position==="sticky"&&{position:"sticky",zIndex:(s.vars||s).zIndex.appBar,top:0,left:"auto",right:0},t.position==="static"&&{position:"static"},t.position==="relative"&&{position:"relative"},!s.vars&&v({},t.color==="default"&&{backgroundColor:e,color:s.palette.getContrastText(e)},t.color&&t.color!=="default"&&t.color!=="inherit"&&t.color!=="transparent"&&{backgroundColor:s.palette[t.color].main,color:s.palette[t.color].contrastText},t.color==="inherit"&&{color:"inherit"},s.palette.mode==="dark"&&!t.enableColorOnDark&&{backgroundColor:null,color:null},t.color==="transparent"&&v({backgroundColor:"transparent",color:"inherit"},s.palette.mode==="dark"&&{backgroundImage:"none"})),s.vars&&v({},t.color==="default"&&{"--AppBar-background":t.enableColorOnDark?s.vars.palette.AppBar.defaultBg:B(s.vars.palette.AppBar.darkBg,s.vars.palette.AppBar.defaultBg),"--AppBar-color":t.enableColorOnDark?s.vars.palette.text.primary:B(s.vars.palette.AppBar.darkColor,s.vars.palette.text.primary)},t.color&&!t.color.match(/^(default|inherit|transparent)$/)&&{"--AppBar-background":t.enableColorOnDark?s.vars.palette[t.color].main:B(s.vars.palette.AppBar.darkBg,s.vars.palette[t.color].main),"--AppBar-color":t.enableColorOnDark?s.vars.palette[t.color].contrastText:B(s.vars.palette.AppBar.darkColor,s.vars.palette[t.color].contrastText)},{backgroundColor:"var(--AppBar-background)",color:t.color==="inherit"?"inherit":"var(--AppBar-color)"},t.color==="transparent"&&{backgroundImage:"none",backgroundColor:"transparent",color:"inherit"}))}),Oo=p.forwardRef(function(t,e){const r=Z({props:t,name:"MuiAppBar"}),{className:a,color:n="primary",enableColorOnDark:l=!1,position:c="fixed"}=r,x=oo(r,Lo),i=v({},r,{color:n,position:c,enableColorOnDark:l}),d=Ro(i);return o.jsx(Po,v({square:!0,component:"header",ownerState:i,elevation:4,className:so(d.root,a,c==="fixed"&&"mui-fixed"),ref:e},x))}),Fo=Oo,Vo=({title:s="Chat App",description:t="this is a chat app"})=>o.jsxs(eo,{children:[o.jsx("title",{children:s}),o.jsx("meta",{name:"description",content:t})]}),$o=b(o.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10h5v-2h-5c-4.34 0-8-3.66-8-8s3.66-8 8-8 8 3.66 8 8v1.43c0 .79-.71 1.57-1.5 1.57s-1.5-.78-1.5-1.57V12c0-2.76-2.24-5-5-5s-5 2.24-5 5 2.24 5 5 5c1.38 0 2.64-.56 3.54-1.47.65.89 1.77 1.47 2.96 1.47 1.97 0 3.5-1.6 3.5-3.57V12c0-5.52-4.48-10-10-10m0 13c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3"}),"AlternateEmail"),Uo=b(o.jsx("path",{d:"M19 4h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 16H5V10h14zM9 14H7v-2h2zm4 0h-2v-2h2zm4 0h-2v-2h2zm-8 4H7v-2h2zm4 0h-2v-2h2zm4 0h-2v-2h2z"}),"CalendarMonth"),Wo=b(o.jsx("path",{d:"M9 11.75c-.69 0-1.25.56-1.25 1.25s.56 1.25 1.25 1.25 1.25-.56 1.25-1.25-.56-1.25-1.25-1.25m6 0c-.69 0-1.25.56-1.25 1.25s.56 1.25 1.25 1.25 1.25-.56 1.25-1.25-.56-1.25-1.25-1.25M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8 0-.29.02-.58.05-.86 2.36-1.05 4.23-2.98 5.21-5.37C11.07 8.33 14.05 10 17.42 10c.78 0 1.53-.09 2.25-.26.21.71.33 1.47.33 2.26 0 4.41-3.59 8-8 8"}),"Face"),wo=b(o.jsx("path",{d:"m17 7-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4z"}),"Logout"),Yo=b(o.jsx("path",{d:"M18 16v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.68-1.5-1.51-1.5S10.5 3.17 10.5 4v.68C7.63 5.36 6 7.92 6 11v5l-1.3 1.29c-.63.63-.19 1.71.7 1.71h13.17c.89 0 1.34-1.08.71-1.71zm-6.01 6c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2M6.77 4.73c.42-.38.43-1.03.03-1.43-.38-.38-1-.39-1.39-.02C3.7 4.84 2.52 6.96 2.14 9.34c-.09.61.38 1.16 1 1.16.48 0 .9-.35.98-.83.3-1.94 1.26-3.67 2.65-4.94M18.6 3.28c-.4-.37-1.02-.36-1.4.02-.4.4-.38 1.04.03 1.42 1.38 1.27 2.35 3 2.65 4.94.07.48.49.83.98.83.61 0 1.09-.55.99-1.16-.38-2.37-1.55-4.48-3.25-6.05"}),"NotificationsActiveRounded"),Qo=b(o.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search"),qo=()=>{var t,e,r,a,n,l;const{user:s}=C(c=>c.auth);return o.jsxs(k,{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[o.jsx(Bo,{src:bo((t=s==null?void 0:s.data)==null?void 0:t.avatar.url),sx:{width:200,height:200,objectFit:"contain",marginBottom:"1rem",border:"4px solid white"},alt:(e=s==null?void 0:s.data)==null?void 0:e.name}),o.jsx(T,{heading:"Bio",text:(r=s==null?void 0:s.data)==null?void 0:r.bio}),o.jsx(T,{heading:"Username",text:(a=s==null?void 0:s.data)==null?void 0:a.username,Icon:o.jsx($o,{})}),o.jsx(T,{heading:"Name",text:(n=s==null?void 0:s.data)==null?void 0:n.name,Icon:o.jsx(Wo,{})}),o.jsx(T,{heading:"Joined",text:Ao((l=s==null?void 0:s.data)==null?void 0:l.createdAt).fromNow(),Icon:o.jsx(Uo,{})})]})},T=({heading:s,text:t,Icon:e})=>o.jsxs(k,{direction:"row",alignItems:"center",specing:"1rem",color:"white",textAlign:"center",marginBottom:"1rem",children:[e&&e,o.jsxs(k,{children:[o.jsx(f,{variant:"body1",children:t}),o.jsx(f,{color:"gray",variant:"caption",children:s})]})]}),Jo=({avatar:s=[],name:t,_id:e,groupChat:r=!1,sameSender:a,isOnline:n,newMessageAlert:l,index:c=0,handleDeleteChat:x})=>o.jsx(ro,{sx:{padding:"0"},to:`/chat/${e}`,onContextMenu:i=>x(i,e,r),children:o.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"1rem",backgroundColor:a?"black":"unset",color:a?"white":"unset",position:"relative"},children:[o.jsx(_o,{avatar:s}),o.jsxs(k,{children:[o.jsx(f,{children:t}),l&&o.jsxs(f,{children:[l.count," New Messages"]})]}),n&&o.jsx(E,{sx:{width:"10px",height:"10px",borderRadius:"50%",bgcolor:"green",position:"absolute",top:"50%",right:"1rem",transform:"translateY(-50%)"}})]})}),Ko=p.memo(Jo),G=({w:s="100%",chats:t=[],onlineUsers:e=[],newMessagesAlert:r,handleDeleteChat:a})=>{const l=L().chatId;return o.jsx(k,{direction:"column",width:s,overflow:"auto",height:"100%",children:t==null?void 0:t.map((c,x)=>{const{avatar:i,_id:d,name:h,groupChat:u,members:j}=c,g=r.find(({chatId:A})=>A===d),_=j==null?void 0:j.some(A=>e.includes(d));return o.jsx(Ko,{index:x,newMessageAlert:g,isOnline:_,avatar:i,name:h,groupChat:u,_id:d,sameSender:l===d,handleDeleteChat:a},d)})})},Xo=p.lazy(()=>D(()=>import("./Search-D1He7V8E.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]))),Zo=p.lazy(()=>D(()=>import("./Notifications-GdzM-Ank.js"),__vite__mapDeps([18,1,3,4,10,8,7,9,19]))),os=p.lazy(()=>D(()=>import("./NewGroup-BF1Jc6wU.js"),__vite__mapDeps([20,1,5,6,4,7,8,9,3,2,10,11,19]))),ss=()=>{const{isSearch:s,isNotification:t,isNewGroup:e}=C(u=>u.misc),{notificationCount:r}=C(u=>u.chat),a=R(),n=P(),l=()=>{n(O(!0))},c=()=>{n(no(!0))},x=()=>{n(co(!0))},i=()=>{a("/groups")},d=async()=>{var u,j;try{const{data:g}=await io.get("http://localhost:4000/api/v1/users/logout",{withCredentials:!0});n(lo()),z.success(g.message)}catch(g){z.error(((j=(u=g==null?void 0:g.response)==null?void 0:u.data)==null?void 0:j.message)||"Something Went Wrong")}},h=()=>{n(po(!0)),n(xo())};return o.jsxs(o.Fragment,{children:[o.jsx(E,{sx:{flexGrow:1},height:"4rem",children:o.jsx(Fo,{position:"static",sx:{bgcolor:ao},children:o.jsxs(No,{children:[o.jsx(f,{variant:"h6",sx:{display:{xs:"none",sm:"block"}},children:"Chat"}),o.jsx(E,{sx:{display:{sx:"block",sm:"none"}},children:o.jsx(V,{color:"inherit",onClick:l,children:o.jsx(Io,{})})}),o.jsx(E,{sx:{flexGrow:1}}),o.jsxs(E,{children:[o.jsx(I,{title:"Search",onClick:c,icon:o.jsx(Qo,{})}),o.jsx(I,{title:"New Group",onClick:x,icon:o.jsx(Co,{})}),o.jsx(I,{title:"Manage Groups",onClick:i,icon:o.jsx(zo,{})}),o.jsx(I,{title:"Notifications",onClick:h,icon:o.jsx(Yo,{}),value:r}),o.jsx(I,{title:"Logout",onClick:d,icon:o.jsx(wo,{})})]})]})})}),s&&o.jsx(p.Suspense,{fallback:o.jsx(N,{open:!0}),children:o.jsx(Xo,{})}),t&&o.jsx(p.Suspense,{fallback:o.jsx(N,{open:!0}),children:o.jsx(Zo,{})}),e&&o.jsx(p.Suspense,{fallback:o.jsx(N,{open:!0}),children:o.jsx(os,{})})]})},I=({title:s,icon:t,onClick:e,value:r})=>o.jsx(So,{title:s,children:o.jsx(V,{color:"inherit",size:"large",onClick:e,children:r?o.jsx(Do,{badgeContent:r,color:"error",children:t}):t})}),ms="ALERT",ts="REFETCH_CHATS",H="NEW_MESSAGES_ALERT",es="NEW_REQUEST",js="NEW_MESSAGE",Cs="START_TYPING",fs="STOP_TYPING",rs=({dispatch:s,deleteMenuAnchor:t})=>{const{isDeleteMenu:e,selectedDeleteChat:r}=C(x=>x.misc),a=r.groupChat,n=()=>{s(F(!1))},l=()=>{},c=()=>{};return o.jsx(To,{open:e,onClose:n,anchorEl:t.current,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"center",horizontal:"center"},children:o.jsx(k,{sx:{width:"10rem",padding:"0.5rem",cursor:"pointer"},direction:"row",alignItems:"center",spacing:"0.5rem",onClick:a?l:c,children:a?o.jsxs(o.Fragment,{children:[o.jsx(Go,{}),o.jsx(f,{children:"Leave Group"})]}):o.jsxs(o.Fragment,{children:[o.jsx(fo,{}),o.jsx(f,{children:"Delete Chat"})]})})})},as=()=>s=>t=>{const e=L(),r=R(),a=e.chatId,n=p.useRef(null),{isMobileMenu:l}=C(m=>m.misc),{newMessagesAlert:c}=C(m=>m.chat),{user:x}=C(m=>m.auth),i=P(),{isLoading:d,data:h,isError:u,error:j,refetch:g}=ho("");vo([{isError:u,error:j}]),p.useEffect(()=>{Eo({key:H,value:c})},[c]);const _=uo(),A=(m,Q,q)=>{i(F(!0)),i(jo({chatId:Q,groupChat:q})),n.current=m.currentTarget},$=()=>i(O(!1)),U=p.useCallback(m=>{m.chatId!==a&&i(go(m))},[a]),W=p.useCallback(()=>{i(mo())},[i]),w=p.useCallback(()=>{g(),r("/")},[g,r]),Y={[H]:U,[es]:W,[ts]:w};return ko(_,Y),o.jsxs(o.Fragment,{children:[o.jsx(Vo,{}),o.jsx(ss,{}),o.jsx(rs,{dispatch:i,deleteMenuAnchor:n}),d?o.jsx(S,{}):o.jsx(Mo,{open:l,onClick:$,children:o.jsx(G,{w:"70vw",chats:h==null?void 0:h.chats,chatId:a,handleDeleteChat:A,newMessagesAlert:c})}),o.jsxs(M,{container:!0,height:"calc(100vh - 4rem)",children:[o.jsx(M,{item:!0,sm:4,md:3,sx:{display:{xs:"none",sm:"block"}},height:"100%",children:d?o.jsx(S,{}):o.jsx(G,{chats:h==null?void 0:h.chats,chatId:a,handleDeleteChat:A,newMessagesAlert:c})}),o.jsx(M,{item:!0,xs:12,sm:8,md:5,lg:6,height:"100%",children:o.jsx(s,{...t,chatId:a,user:x})}),o.jsx(M,{item:!0,md:4,lg:3,height:"100%",sx:{display:{xs:"none",md:"block"},padding:"2rem",bgcolor:"rgba(0, 0, 0, 0.85)"},children:o.jsx(qo,{})})]})]})},vs=as;export{vs as A,js as N,Cs as S,fs as a,ms as b,Qo as c};
