import{aC as k,c as q,u as v,aD as C,j as e,S as m,n as N,r as R,J as f,_ as l}from"./index-BRYrtOYy.js";import{a as b}from"./Delete-BT8gj__Z.js";import{D as A,a as D}from"./DialogTitle-on2HWKW6.js";import{T as j}from"./Modal-CADgA5Of.js";import{L as I}from"./ListItem-B4dopy2O.js";import{A as S}from"./Menu-Cy-i2GGQ.js";import{B as h}from"./Button-CgSTDiwQ.js";import"./isMuiElement-DvTSXCug.js";const J=()=>{var p;const{isLoading:a,data:s,error:o,isError:n}=k(),{isNotification:c}=q(t=>t.misc),d=v(),[g]=C(),w=async({_id:t,accept:i})=>{var x,u;d(f(!1));try{const r=await g({requestId:t,accept:i});(x=r.data)!=null&&x.success?l.success(r.data.message):l.error(((u=r.data)==null?void 0:u.error)||"Something went wrong...")}catch(r){l.error(r.message)}},y=()=>d(f(!1));return b([{error:o,isError:n}]),e.jsx(A,{open:c,onClose:y,children:e.jsxs(m,{p:{xs:"1rem",sm:"2rem"},maxWidth:"25rem",children:[e.jsx(D,{children:"Notifications"}),a?e.jsx(N,{}):e.jsx(e.Fragment,{children:(s==null?void 0:s.allrequest.length)>0?(p=s==null?void 0:s.allrequest)==null?void 0:p.map(({sender:t,_id:i})=>e.jsx(E,{sender:t,_id:i,handler:w},i)):e.jsx(j,{textAlign:"center",children:"0 notifications found."})})]})})},E=R.memo(({sender:a,_id:s,handler:o})=>{const{name:n,avatar:c}=a;return e.jsx(I,{children:e.jsxs(m,{direction:"row",alignItems:"center",spacing:"1rem",width:"100%",children:[e.jsx(S,{src:c}),e.jsx(j,{variant:"body1",sx:{flexGrow:1,display:"-webkit-box",WebkitLineClamp:1,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis",width:"100%"},children:`${n} send you a friend Request`}),e.jsxs(m,{direction:{xs:"column",sm:"row"},children:[e.jsx(h,{onClick:()=>o({_id:s,accept:!0}),children:"Accept"}),e.jsx(h,{color:"error",onClick:()=>o({_id:s,accept:!1}),children:"Reject"})]})]})})});export{J as default};
